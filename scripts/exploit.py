#!/usr/bin/env python3

from dateutil import parser
import matplotlib.pyplot as plt

d={3:[0, 0, 0, 0], 10:[0, 0, 0, 0], 100:[0, 0, 0, 0]}

for i in range(4):
    for N, faulty in zip((3, 10, 100), (1, 4, 49)):
        for t in (500, 1000, 1500, 2000):
            with open("date_tests/res_{}_{}_{}_{}".format(N, faulty, t, i)) as f:
                t1 = parser.parse(f.readline())
                t2 = parser.parse(f.readline())
                delta = (t2-t1).microseconds/1000
                d[N][t//500-1]+=delta/4
print(d)

# for N in d:
#   plt.plot([500, 1000, 1500, 2000], d[N], marker='o', label='N_process={}'.format(N))
#plt.legend()
#plt.xlabel("Time before leader election")
#plt.ylabel("average time for reaching decision")
#plt.show()
            
